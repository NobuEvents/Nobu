connections:
  front_kafka:
    type: kafka
    impl: com.nobu.connect.kafka.KafkaConnector
    config:
      bootstrap.servers: localhost:5050
  zendesk_kafka:
    type: kafka
    impl: com.nobu.connect.kafka.KafkaConnector
    config:
      bootstrap.servers: localhost:5051
  segment_main:
    type: segment
    impl: com.nobu.connect.segment.SegmentConnector
    config:
      url: https://nobu.segment.com/webhook
  console_main:
    type: console
    impl: com.nobu.connect.console.ConsoleConnector
    config:
      url: https://nobu.segment.com/webhook

routes:
  # dlq is a special reserved route name.
  # If dlq configured and the event validation failed
  # the event will be sent to the dlq connection.
  # As of now the system limited to one dlq route.
  - type: dlq
    target: front_kafka
    config:
      url: https://nobu.segment.com/webhook
      config:
        topic: dlq_topic
        acks: 1
        batch.size: 16384
        linger.ms: 5
        buffer.memory: 33554432
        max.request_size: 1048576
  - type: signup
    target: front_kafka
    config:
      topic: signup_kafka_front
      acks: 1
      batch.size: 16384
      linger.ms: 5
      buffer.memory: 33554432
      max.request_size: 1048576
  - type: signup
    target: zendesk_kafka
    config:
      topic: signup_kafka_zendesk
      acks: 1
      batch.size: 16384
      linger.ms: 5
      buffer.memory: 33554432
      max.request.size: 1048576
  - type: signup
    target: segment_main
    config:
      url: https://nobu.segment.com/webhook
  - type: purchase
    target: console_main
    config:
      url: https://nobu.segment.com/webhook

