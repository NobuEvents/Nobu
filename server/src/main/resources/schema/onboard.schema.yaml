schemas:
  srn:acme:growth:onboard:1.0.0:
    type: event
    description: A onboarding event
    owner: Growth Team
    domain: core
    compliance_owner: Legal Team
    channel: https://slack.com/nobu
    email: growth@nobu.com
    status: active
    see_also:
      - https://nobu.com/schemata/purchase
    subscribers:
      - Sales Team
      - Marketing Team
      - Customer Support Team
      - Machine Learning Team
    fields:
      user_id:
        type: string
        description: The user_id of the user
        is_pii: true
      account_id:
        type: long
        description: The account_id of the user
        key:
          type: foreign
          target: account
          target_field: id
      email:
        type: string
        description: The email of the user
        is_pii: true
      referral_source:
        type: string
        description: Referral source
      location:
        type: map
        description: Location
        properties:
          ip_address:
            type: string
            description: IP Address
          city:
            type: string
            description: City
          state:
            type: string
            description: State
          country:
            type: string
            description: Country
        device_info:
          type: map
          description: Device Info
          properties:
            device_type:
              type: string
              description: Device Type
            device_os:
              type: string
              description: Device OS
    validators:
      dlq:
        name: signup length and event checker
        description: The event is signup and the phone number is greater than 200
        query: email != null && account_id > 0 && user_id != null && location.ip_address != null
        target: dlq_kafka